(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"49db":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-breadcrumbs",{staticClass:"q-mb-md"},[a("q-breadcrumbs-el",{attrs:{to:"/dashboard",label:"Inicio"}}),a("q-breadcrumbs-el",{attrs:{label:"Cupones"}})],1),a("div",{staticClass:"text-h6"},[t._v("Cupones")]),a("div",{staticClass:"text-right q-ma-lg"},[a("q-btn",{attrs:{push:"",color:"indigo-13",icon:"add",label:"agregar nuevo"},on:{click:function(e){t.dialog=!0}}})],1),a("q-markup-table",{attrs:{bordered:"",separator:"horizontal"}},[a("thead",{staticClass:"bg-indigo-14"},[a("tr",[a("th",{attrs:{colspan:"6"}},[a("div",{staticClass:"row no-wrap items-center"},[a("div",{staticClass:"text-h4 q-ml-md text-white"},[t._v("Cupones")])])])]),a("tr",{staticClass:"text-white"},[a("th",{staticClass:"text-right"},[t._v("Nombre")]),a("th",{staticClass:"text-right"},[t._v("Tipo")]),a("th",{staticClass:"text-right"},[t._v("Cantidad")]),a("th",{staticClass:"text-right"},[t._v("Fecha Inicio")]),a("th",{staticClass:"text-right"},[t._v("Fecha Fin")]),a("th",{staticClass:"text-right"})])]),a("tbody",[t._l(t.cupones,(function(e,n){return a("tr",{key:n},[a("td",{staticClass:"text-right"},[t._v(t._s(e.name))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.type))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("numfix")(e.amount)))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.start))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.end))]),a("td",{staticClass:"text-right"},[a("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteItem(n)}}})],1)])})),0===t.cupones.length?a("tr",[a("td",{attrs:{colspan:"6"}},[t._v("No hay cupones aún")])]):t._e()],2)]),a("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Agregar Cupón")])]),a("q-separator"),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md",attrs:{action:"#"},on:{submit:t.submit}},[a("q-input",{attrs:{filled:"",label:"Nombre del cupón",required:"",dense:"","lazy-rules":"",rules:[function(t){return t&&t.length>3||"Ingrese un valor válido"}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("div",{staticClass:"text-center q-mt-md"},[a("p",[t._v("Tipo de Cupón")]),a("q-btn-toggle",{attrs:{push:"","toggle-color":"indigo-14",options:[{label:"Monetario",value:"Monto"},{label:"Porcentaje",value:"Porcentaje"}]},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("q-input",{attrs:{filled:"",label:"Cantidad",required:"",dense:"","lazy-rules":"",rules:[function(t){return t&&t>0||"Ingrese un valor válido"}]},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),a("q-input",{attrs:{filled:"",dense:"",label:"Fecha de Inicio",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.optionsFn},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1)],1)]},proxy:!0}]),model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("q-input",{attrs:{filled:"",dense:"",label:"Fecha Fin",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.optionsFn2},on:{input:function(){return t.$refs.qDateProxy2.hide()}},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1)],1)]},proxy:!0}]),model:{value:t.end,callback:function(e){t.end=e},expression:"end"}}),a("div",{staticClass:"text-center q-mt-md"},[a("q-btn",{staticClass:"full-width q-mt-lg",attrs:{push:"",color:"indigo-14",icon:"save",type:"submit",label:"guardar"}})],1)],1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"grey"}})],1)],1)],1)],1)},s=[],i=(a("6b54"),a("06db"),a("7f7f"),a("a481"),a("8aa5")),r=a.n(i),o={name:"Cupones",data:function(){return{buscar:"",uid:"",name:"",type:"Monto",amount:0,start:(new Date).toISOString().slice(0,10).replace(/-/g,"/"),end:(new Date).toISOString().slice(0,10).replace(/-/g,"/"),dialog:!1,cupones:[]}},mounted:function(){this.uid=r.a.auth().currentUser.uid;var t=this;this.uid=r.a.auth().currentUser.uid;var e=r.a.firestore();e.collection("coupons_"+this.uid).get().then((function(e){e.forEach((function(e){var a=e.data();a.id=e.id,t.cupones.push(a)}))}))},methods:{optionsFn:function(t){return t>=(new Date).toISOString().slice(0,10).replace(/-/g,"/")},optionsFn2:function(t){return t>=this.start},submit:function(){var t=this,e={name:this.name,type:this.type,amount:this.amount,start:this.start,end:this.end},a=r.a.firestore();a.collection("coupons_"+this.uid).add(e).then((function(a){e.id=a.id,t.cupones.push(e),t.dialog=!1,t.$q.notify({message:"Se ha agregado el cupón",color:"green"})})).catch((function(t){console.error("Error adding document: ",t)}))},deleteItem:function(t){}},filters:{numfix:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},watch:{start:function(t){new Date(t)>new Date(this.end)&&(this.end=t)}}},l=o,c=a("2877"),u=a("eebe"),d=a.n(u),p=a("9989"),h=a("ead5"),m=a("079e"),g=a("9c40"),f=a("2bb1"),b=a("068f"),v=a("24e8"),x=a("f09f"),q=a("a370"),C=a("eb85"),_=a("0378"),y=a("27f9"),w=a("6a67"),k=a("0016"),Q=a("7cbe"),I=a("52ee"),S=a("4b7e"),D=a("7f67"),F=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=F.exports;d()(F,"components",{QPage:p["a"],QBreadcrumbs:h["a"],QBreadcrumbsEl:m["a"],QBtn:g["a"],QMarkupTable:f["a"],QImg:b["a"],QDialog:v["a"],QCard:x["a"],QCardSection:q["a"],QSeparator:C["a"],QForm:_["a"],QInput:y["a"],QBtnToggle:w["a"],QIcon:k["a"],QPopupProxy:Q["a"],QDate:I["a"],QCardActions:S["a"]}),d()(F,"directives",{ClosePopup:D["a"]})}}]);