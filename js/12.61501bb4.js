(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{b41f:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",[t("q-breadcrumbs",{staticClass:"q-mb-md"},[t("q-breadcrumbs-el",{attrs:{to:"/dashboard",label:"Inicio"}}),t("q-breadcrumbs-el",{attrs:{label:"Ajustes"}})],1),t("p",{staticClass:"text-h6"},[e._v("Ajustes")]),t("q-card",[t("q-tabs",{staticClass:"bg-indigo-13 text-white",attrs:{align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("q-tab",{attrs:{name:"general",icon:"settings",label:"General"}}),t("q-tab",{attrs:{name:"images",icon:"collections",label:"Banners"}}),t("q-tab",{attrs:{name:"map",icon:"place",label:"Localización"}})],1),t("q-separator"),t("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("q-tab-panel",{attrs:{name:"general"}},[t("General")],1),t("q-tab-panel",{attrs:{name:"images"}},[t("Banners")],1),t("q-tab-panel",{attrs:{name:"map"}},[t("Map")],1)],1)],1)],1)},i=[],r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"text-h6"},[e._v("General")]),t("br"),t("q-input",{staticStyle:{"max-width":"500px"},attrs:{filled:"","bottom-slots":"",label:"Nombre del Restaurate",counter:"",maxlength:"30"},scopedSlots:e._u([{key:"before",fn:function(){return[t("q-icon",{attrs:{name:"store_mall_directory"}})]},proxy:!0}]),model:{value:e.name,callback:function(a){e.name=a},expression:"name"}}),t("br"),t("q-input",{staticStyle:{"max-width":"300px"},attrs:{filled:"","bottom-slots":"",label:"Costo de envío"},scopedSlots:e._u([{key:"before",fn:function(){return[t("q-icon",{attrs:{name:"directions_bike"}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("Monto adicional que pagarán tus clientes por concepto de envío")]},proxy:!0}]),model:{value:e.envio,callback:function(a){e.envio=a},expression:"envio"}}),t("br"),t("div",{staticClass:"text-h6"},[e._v("Horario")]),t("br"),t("p",[e._v("Seleccione los días y especifique el horario entre los que los clientes pueden realizar pedidos en la aplicación")]),t("q-list",{attrs:{dense:""}},e._l(e.horario,(function(a){return t("q-item",{key:a.val},[t("q-item-section",{attrs:{avatar:""}},[t("q-checkbox",{attrs:{"true-value":!0,"false-value":!1,color:"indigo-12"},model:{value:a.abierto,callback:function(t){e.$set(a,"abierto",t)},expression:"item.abierto"}})],1),t("q-item-section",[t("q-item-label",[e._v(e._s(a.dia))])],1),t("q-item-section",[t("q-item-label",[t("q-input",{attrs:{dense:"",label:"Hora de Inicio",filled:"",mask:"time",rules:["time"]},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-time",{model:{value:a.hi,callback:function(t){e.$set(a,"hi",t)},expression:"item.hi"}})],1)],1)]},proxy:!0}],null,!0),model:{value:a.hi,callback:function(t){e.$set(a,"hi",t)},expression:"item.hi"}})],1)],1),t("q-item-section",[t("q-item-label",[t("q-input",{attrs:{dense:"",label:"Hora de fin",filled:"",mask:"time",rules:["time"]},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-time",{model:{value:a.hf,callback:function(t){e.$set(a,"hf",t)},expression:"item.hf"}})],1)],1)]},proxy:!0}],null,!0),model:{value:a.hf,callback:function(t){e.$set(a,"hf",t)},expression:"item.hf"}})],1)],1)],1)})),1),t("div",{staticClass:"text-center"},[t("q-btn",{staticClass:"q-ma-md",attrs:{push:"",color:"indigo-14",icon:"save",label:"guardar cambios"},on:{click:e.guardar}})],1)],1)},o=[],s=(t("7f7f"),t("8aa5")),l=t.n(s),c={name:"General",data:function(){return{user:null,name:"",envio:0,horario:[{dia:"Lunes",val:1,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Martes",val:2,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Miercoles",val:3,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Jueves",val:4,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Viernes",val:5,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Sabado",val:6,hi:"13:00",hf:"21:00",abierto:!0},{dia:"Domingo",val:7,hi:"13:00",hf:"21:00",abierto:!0}]}},mounted:function(){var e=this,a=l.a.firestore();a.collection("users").doc(l.a.auth().currentUser.uid).get().then((function(a){a.exists?(e.user=a.data(),e.name=a.data().name,e.envio=a.data().envio,a.data().hasOwnProperty("horario")&&(e.horario=a.data().horario)):console.log("No such document!")}))},methods:{guardar:function(){var e=l.a.firestore(),a=this,t=l.a.auth().currentUser,n={name:this.name,envio:this.envio,horario:this.horario};e.collection("users").doc(t.uid).update(n).then((function(){t.updateProfile({displayName:a.name}),a.$q.notify({message:"Se han guardado los cambios",color:"green"})})).catch((function(e){console.error("Error updating document: ",e)}))}}},u=c,d=t("2877"),m=t("eebe"),p=t.n(m),f=t("27f9"),h=t("0016"),b=t("9c40"),g=t("1c1c"),v=t("66e5"),q=t("4074"),x=t("8f8e"),_=t("0170"),y=t("7cbe"),w=t("ca78"),k=Object(d["a"])(u,r,o,!1,null,null,null),C=k.exports;p()(k,"components",{QInput:f["a"],QIcon:h["a"],QBtn:b["a"],QList:g["a"],QItem:v["a"],QItemSection:q["a"],QCheckbox:x["a"],QItemLabel:_["a"],QPopupProxy:y["a"],QTime:w["a"]});var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"text-h6"},[e._v("Banners")]),t("br"),t("div",{staticClass:"row"},[e._m(0),t("div",{staticClass:"col text-center"},[e.banners.length<5?t("q-btn",{attrs:{push:"",color:"indigo-14",icon:"add_photo_alternate"},on:{click:function(a){e.dialog=!0}}},[e._v("Agregar imagen")]):e._e()],1)]),t("div",{staticClass:"q-pa-md row items-start q-gutter-md"},e._l(e.banners,(function(a,n){return t("q-card",{key:a,staticClass:"my-card",staticStyle:{width:"320px"}},[t("q-img",{attrs:{src:a}}),t("q-card-actions",[t("q-btn",{attrs:{flat:""},on:{click:function(t){return e.deleteItem(n,a)}}},[e._v("Eliminar")])],1)],1)})),1),t("q-dialog",{model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[e._v("Agregar Banner")])]),t("q-separator"),t("q-card-section",[t("form",{staticClass:"q-gutter-md",attrs:{action:"#"},on:{submit:function(a){return a.preventDefault(),e.submit(a)}}},[t("div",{staticClass:"text-center",attrs:{id:"preview"}},[e.file_url?t("img",{staticStyle:{"max-height":"300px"},attrs:{src:e.file_url}}):e._e()]),t("q-input",{attrs:{filled:"",dense:"",type:"file",hint:"Agregar imagen"},on:{change:e.onFileChange},model:{value:e.file,callback:function(a){e.file=a},expression:"file"}}),t("div",{staticClass:"text-center q-mt-md"},[t("q-btn",{staticClass:"full-width",attrs:{color:"indigo-14",icon:"save",type:"submit",label:"guardar"}})],1)],1)]),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"grey"}})],1)],1)],1)],1)},S=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"col-8"},[t("p",[e._v("\n        Agrega los banners que apareceran al inicio de la App, puedes tener un máximo de 5 imágenes.\n        "),t("br"),e._v("Tamaño recomendado:\n      ")])])}],L=(t("551c"),t("06db"),t("967e")),$=t.n(L),E=(t("96cf"),t("fa84")),B=t.n(E),U={name:"Banners",data:function(){return{uid:"",dialog:!1,user:null,name:"",banners:[],file_url:"",file:null}},mounted:function(){var e=this;this.uid=l.a.auth().currentUser.uid;var a=l.a.firestore();a.collection("users").doc(this.uid).get().then((function(a){a.exists?(e.name=a.data().name,a.data().hasOwnProperty("banners")&&(e.banners=a.data().banners)):console.log("No such document!")}))},methods:{submit:function(){var e=B()($.a.mark((function e(){var a,t,n,i;return $.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.file){e.next=12;break}return a=this,this.$q.loading.show({message:"Guardando ..."}),e.next=5,this.uploadFile();case 5:t=e.sent,this.banners.push(t),n=l.a.firestore(),i={banners:this.banners},n.collection("users").doc(l.a.auth().currentUser.uid).update(i).then((function(){a.dialog=!1,a.$q.loading.hide()})).catch((function(e){console.error("Error updating document: ",e)})),e.next=13;break;case 12:this.$q.notify({message:"Seleccione una imagen",color:"warning"});case 13:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),deleteItem:function(e,a){var t=l.a.firestore();this.banners.splice(e,1);var n={banners:this.banners};t.collection("users").doc(l.a.auth().currentUser.uid).update(n).then((function(){var e=l.a.storage().refFromURL(a);e.delete()})).catch((function(e){console.error("Error updating document: ",e)}))},uploadFile:function(){var e=B()($.a.mark((function e(){var a;return $.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,e.abrupt("return",new Promise((function(e,t){var n=l.a.storage().ref(),i=a.file,r=n.child("banners_"+a.uid+"/"+i.name).put(i);r.on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done")}),(function(e){console.log(e),t()}),(function(){r.snapshot.ref.getDownloadURL().then((function(a){e(a)}))}))})));case 2:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),onFileChange:function(e){var a=e.target.files[0];a.size>4194304?this.$q.notify({color:"warning",message:"La imagen es muy grande",icon:"warning",position:"center"}):"image/jpeg"!=a.type&&"image/png"!=a.type?this.$q.notify({color:"warning",message:"La imagen no tiene un formato valido",icon:"warning",position:"center"}):(this.file=e.target.files[0],this.file_url=URL.createObjectURL(a))}}},A=U,I=t("f09f"),P=t("068f"),G=t("4b7e"),T=t("24e8"),j=t("a370"),M=t("eb85"),O=t("7f67"),N=Object(d["a"])(A,Q,S,!1,null,null,null),R=N.exports;p()(N,"components",{QBtn:b["a"],QCard:I["a"],QImg:P["a"],QCardActions:G["a"],QDialog:T["a"],QCardSection:j["a"],QSeparator:M["a"],QInput:f["a"]}),p()(N,"directives",{ClosePopup:O["a"]});var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"text-h6"},[e._v("Localización y radio de entrega")]),t("br"),t("p",[e._v("Mueve el pin para establecer tu ubicación, define el radio de entrega en kilometros a los que puedes enviar pedidos")]),t("p",{staticClass:"text-subtitle1"},[e._v("Radio: "+e._s(e.radio)+" Km")]),t("q-slider",{attrs:{min:1,max:15,step:.5,label:"","label-always":"",color:"indigo-14"},model:{value:e.radio,callback:function(a){e.radio=a},expression:"radio"}}),t("GmapMap",{staticStyle:{width:"100%",height:"400px"},attrs:{center:{lat:e.currentLocation.lat,lng:e.currentLocation.lng},zoom:15-e.radio/3,options:{streetViewControl:!1}}},[t("GmapCircle",{attrs:{center:{lat:e.lat,lng:e.lng},radius:1e3*e.radio,visible:!0,options:{fillColor:"blue",fillOpacity:.4,strokeColor:"blue",strokeWeight:1}}}),t("GmapMarker",{attrs:{position:{lat:e.lat,lng:e.lng},clickable:!0,draggable:!0},on:{dragend:function(a){return e.getCoordenadas(a.latLng)}}})],1),t("div",{staticClass:"text-center"},[t("q-btn",{staticClass:"q-ma-md",attrs:{push:"",color:"indigo-14",icon:"save",label:"guardar cambios"},on:{click:e.guardar}})],1)],1)},D=[],F=t("755e"),H={name:"Map",data:function(){return{uid:"",radio:1,currentLocation:{lat:19.043522331313046,lng:-98.19798590761836},lat:19.043522331313046,lng:-98.19798590761836}},computed:{google:F["gmapApi"]},mounted:function(){var e=this;this.uid=l.a.auth().currentUser.uid;var a=l.a.firestore();a.collection("users").doc(this.uid).get().then((function(a){a.exists?(e.name=a.data().name,a.data().hasOwnProperty("radio")&&(e.radio=a.data().radio,e.lat=a.data().lat,e.currentLocation.lat=a.data().lat,e.lng=a.data().lng,e.currentLocation.lng=a.data().lng)):console.log("No such document!")}))},methods:{getCoordenadas:function(e){this.lat=e.lat(),this.lng=e.lng()},guardar:function(){var e=this,a=l.a.firestore(),t={radio:this.radio,lat:this.lat,lng:this.lng};a.collection("users").doc(l.a.auth().currentUser.uid).update(t).then((function(){e.$q.notify({message:"Se han guardado los cambios",color:"green"})})).catch((function(e){console.error("Error updating document: ",e)}))}}},J=H,V=t("c1d0"),K=Object(d["a"])(J,z,D,!1,null,null,null),W=K.exports;p()(K,"components",{QSlider:V["a"],QBtn:b["a"]});var X={name:"Settings",components:{General:C,Banners:R,Map:W},data:function(){return{buscar:"",tab:"general"}}},Y=X,Z=t("9989"),ee=t("ead5"),ae=t("079e"),te=t("429b"),ne=t("7460"),ie=t("adad"),re=t("823b"),oe=Object(d["a"])(Y,n,i,!1,null,null,null);a["default"]=oe.exports;p()(oe,"components",{QPage:Z["a"],QBreadcrumbs:ee["a"],QBreadcrumbsEl:ae["a"],QCard:I["a"],QTabs:te["a"],QTab:ne["a"],QSeparator:M["a"],QTabPanels:ie["a"],QTabPanel:re["a"]})}}]);